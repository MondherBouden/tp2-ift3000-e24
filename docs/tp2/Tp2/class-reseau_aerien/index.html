<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>reseau_aerien (tp2.Tp2.reseau_aerien)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">tp2</a> &#x00BB; <a href="../index.html">Tp2</a> &#x00BB; reseau_aerien</nav><header class="odoc-preamble"><h1>Class <code><span>Tp2.reseau_aerien</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec inherit"><code><span><span class="keyword">inherit</span> <a href="../class-reseau/index.html">reseau</a></span></code></div></div><div class="odoc-spec"><div class="spec value instance-variable anchored" id="val-nom_reseau"><a href="#val-nom_reseau" class="anchor"></a><code><span><span class="keyword">val</span> nom_reseau : string</span></code></div></div><div class="odoc-spec"><div class="spec value instance-variable anchored" id="val-liste_villes"><a href="#val-liste_villes" class="anchor"></a><code><span><span class="keyword">val</span> <span class="keyword">mutable</span> liste_villes : <span><a href="../class-ville/index.html">ville</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value instance-variable anchored" id="val-liste_trajets"><a href="#val-liste_trajets" class="anchor"></a><code><span><span class="keyword">val</span> <span class="keyword">mutable</span> liste_trajets : <span><a href="../class-trajet/index.html">trajet</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-get_nom_reseau"><a href="#method-get_nom_reseau" class="anchor"></a><code><span><span class="keyword">method</span> get_nom_reseau : string</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-get_liste_villes"><a href="#method-get_liste_villes" class="anchor"></a><code><span><span class="keyword">method</span> get_liste_villes : <span><a href="../class-ville/index.html">ville</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-set_liste_villes"><a href="#method-set_liste_villes" class="anchor"></a><code><span><span class="keyword">method</span> set_liste_villes : <span><span><a href="../class-ville/index.html">ville</a> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-get_liste_trajets"><a href="#method-get_liste_trajets" class="anchor"></a><code><span><span class="keyword">method</span> get_liste_trajets : <span><a href="../class-trajet/index.html">trajet</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-set_liste_trajets"><a href="#method-set_liste_trajets" class="anchor"></a><code><span><span class="keyword">method</span> set_liste_trajets : <span><span><a href="../class-trajet/index.html">trajet</a> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-ajouter_ville"><a href="#method-ajouter_ville" class="anchor"></a><code><span><span class="keyword">method</span> ajouter_ville : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>ajouter_ville nv</code> Cette méthode prend le nom d'une ville nv et va mettre à jour le réseau. Elle doit retourner un réseau inchangé si la ville est déjà dans le réseau. De ce fait, on ne rajoute pas de doublons dans le réseau.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#ajouter_ville &quot;Quebec&quot;;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-ville_existe"><a href="#method-ville_existe" class="anchor"></a><code><span><span class="keyword">method</span> ville_existe : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>ville_existe nv</code> Cette méthode retourne true si la ville existe dans le réseau, false sinon.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#ville_existe &quot;Quebec&quot;;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-retourner_ville"><a href="#method-retourner_ville" class="anchor"></a><code><span><span class="keyword">method</span> retourner_ville : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../class-ville/index.html">ville</a></span></code></div><div class="spec-doc"><p><code>retourner_ville nv</code> Cette méthode prend nv le nom d'une ville et retourne l'objet ville se trouvant dans le réseau. Si la ville n'existe pas dans le réseau, elle doit invoquer failwith &quot;Le reseau ne contient pas cette ville&quot;.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#retourner_ville &quot;Quebec&quot;;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-ajouter_trajet"><a href="#method-ajouter_trajet" class="anchor"></a><code><span><span class="keyword">method</span> ajouter_trajet : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>ajouter_trajet vd va cd d</code> Cette méthode prend le nom d'une ville de départ vd et d'une ville d'arrivée va ainsi que le coût en dollars cd et la durée du trajet d et doit ajouter le trajet dans le réseau. Si une des villes n'existe pas dans le réseau, elle doit invoquer failwith &quot;Au moins une des deux villes du trajet n'est pas dans le reseau&quot;. Elle ne doit pas changer le réseau si le trajet existe déjà.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#ajouter_trajet &quot;Quebec&quot; &quot;Montreal&quot; 203.54 0.75;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-trajet_existe"><a href="#method-trajet_existe" class="anchor"></a><code><span><span class="keyword">method</span> trajet_existe : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>trajet_existe nv</code> Cette méthode retourne true si le trajet existe dans le réseau, false sinon.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#trajet_existe &quot;Quebec&quot; &quot;Montreal&quot;;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-retourner_trajet"><a href="#method-retourner_trajet" class="anchor"></a><code><span><span class="keyword">method</span> retourner_trajet : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../class-trajet/index.html">trajet</a></span></code></div><div class="spec-doc"><p><code>retourner_trajet vd va</code> Cette méthode prend le nom d'une ville de départ vd et d'une ville d'arrivée va et retourne l'objet trajet se trouvant dans le réseau. Si la trajet n'existe pas dans le réseau, elle doit invoquer failwith &quot;Le reseau ne contient pas ce trajet&quot;.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#retourner_trajet &quot;Quebec&quot; &quot;Montreal&quot;;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-supprimer_ville"><a href="#method-supprimer_ville" class="anchor"></a><code><span><span class="keyword">method</span> supprimer_ville : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>supprimer_ville nv</code> Cette méthode prend le nom d'une ville nv et va mettre à jour le réseau en supprimant la ville qui n'est plus desservie par la compagnie aérienne, ainsi que toutes les références à cette ville dans la liste des successeurs de toutes les autres villes. Cette méthode retourne un message d’erreur si le réseau est vide ou si le réseau ne contient pas la ville à supprimer.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#supprimer_ville &quot;Montreal&quot;;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-supprimer_trajet"><a href="#method-supprimer_trajet" class="anchor"></a><code><span><span class="keyword">method</span> supprimer_trajet : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>supprimer_trajet vd va</code> Cette méthode prend le nom d'une ville de départ vd et d'une ville d'arrivée va et supprime le trajet du réseau. En fait, ceci veut dire que la compagnie aérienne n'offre plus ce trajet. Cette méthode retourne un message d’erreur si le réseau est vide ou si le réseau ne contient pas une des villes formant le trajet à supprimer.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#supprimer_trajet &quot;Quebec&quot; &quot;Chicago&quot;;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-ajouter_liste_villes"><a href="#method-ajouter_liste_villes" class="anchor"></a><code><span><span class="keyword">method</span> ajouter_liste_villes : <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>ajouter_liste_villes lv</code> Cette méthode prend une liste de noms de villes lv et va mettre à jour le réseau dans lequel toutes les villes ont été ajoutées dans ce réseau. Elle doit utiliser la méthode ajouter_ville().</p><p>Exemple:</p><pre class="language-ocaml"><code># r#ajouter_liste_villes [&quot;Sherbrouke&quot;; &quot;Chicoutimi&quot;; &quot;Paris&quot;; 
&quot;La_Havane&quot;; &quot;Detroit&quot;; &quot;Ottawa&quot;; 
&quot;Vancouver&quot;; &quot;Toronto&quot;; &quot;Bogota&quot;; 
&quot;Bruxelles&quot;; &quot;Bujumbura&quot;; &quot;Iqaluit&quot;; 
&quot;Chicago&quot;; &quot;Tokyo&quot;; &quot;Auckland&quot;; 
&quot;New_York&quot;; &quot;Singapour&quot;];;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-ajouter_liste_trajets"><a href="#method-ajouter_liste_trajets" class="anchor"></a><code><span><span class="keyword">method</span> ajouter_liste_trajets : <span><span><span>(string * string * float * float)</span> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>ajouter_liste_trajets lt</code> Cette méthode prend une liste de quadruplet représentant les informations des trajets et va mettre à jour le réseau dans lequel tous les trajets ont été ajoutés dans ce réseau. Elle doit utiliser la méthode ajouter_trajet().</p><p>Exemple:</p><pre class="language-ocaml"><code># r#ajouter_liste_trajets [(&quot;Montreal&quot;, &quot;Quebec&quot;, 149.78, 0.83);
(&quot;Montreal&quot;, &quot;Paris&quot;, 591.96, 6.27);
(&quot;Montreal&quot;, &quot;New_York&quot;, 402.78, 1.91); 
(&quot;Paris&quot;, &quot;Montreal&quot;, 892.39, 6.32);
(&quot;Quebec&quot;, &quot;La_Havane&quot;, 492.21, 3.34);
(&quot;Montreal&quot;, &quot;Detroit&quot;, 699.74, 1.25);
(&quot;Montreal&quot;, &quot;Ottawa&quot;, 192.46, 0.66);
(&quot;Montreal&quot;, &quot;Vancouver&quot;, 639.74, 4.75);
(&quot;Toronto&quot;, &quot;Bogota&quot;, 902.15, 5.42);
(&quot;Montreal&quot;, &quot;Toronto&quot;, 321.98, 1.32);
(&quot;Vancouver&quot;, &quot;Toronto&quot;, 621.46, 3.87);
(&quot;Montreal&quot;, &quot;Bruxelles&quot;, 823.96, 6.87);
(&quot;Bruxelles&quot;, &quot;Bujumbura&quot;, 973.05, 5.27);
(&quot;Ottawa&quot;, &quot;Iqaluit&quot;, 727.74, 3.21);
(&quot;Quebec&quot;, &quot;Chicago&quot;, 620.78, 2.08);
(&quot;Vancouver&quot;, &quot;Tokyo&quot;, 1276.42, 8.65);
(&quot;Vancouver&quot;, &quot;Auckland&quot;, 2351.71, 13.15);
(&quot;Chicago&quot;, &quot;Vancouver&quot;, 1521.44, 4.78);
(&quot;Bujumbura&quot;, &quot;Bruxelles&quot;, 937.46, 7.26)];;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-trier_villes"><a href="#method-trier_villes" class="anchor"></a><code><span><span class="keyword">method</span> trier_villes : unit</span></code></div><div class="spec-doc"><p><code>trier_villes</code> Cette méthode fait en sorte de trier en ordre croissant les villes qui sont contenues dans la liste de villes du réseau. Cette méthode retourne unit car elle fait la mise à jour du réseau. Nous vous conseillons d’utiliser la fonction List.sort en implantant une fonction locale comparer_villes qui prend deux villes et qui retourne 0 si les deux villes sont égales, 1 si la première ville est plus grande (en ordre alphabétique) que la deuxième et -1 sinon.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#trier_villes;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-trier_trajets"><a href="#method-trier_trajets" class="anchor"></a><code><span><span class="keyword">method</span> trier_trajets : unit</span></code></div><div class="spec-doc"><p><code>trier_trajets</code> Cette méthode fait le tri en ordre croissant des trajets. Nous vous conseillons d’utiliser également la fonction List.sort en implantant une fonction locale comparer_trajets qui prend deux trajets et qui retourne 0 si la concaténation des noms des villes de départ et d’arrivée du premier trajet est égale à celle du deuxième trajet. Sinon, il faut retourner 1 ou -1 comme dans la fonction comparer_villes.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#trier_trajets;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-fermeture_transitive"><a href="#method-fermeture_transitive" class="anchor"></a><code><span><span class="keyword">method</span> fermeture_transitive : <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>fermeture_transitive</code> Cette méthode retourne un type 'a qui a le même type que l’objet courant représentant une copie d’un reseau_aerien contenant tous les chemins possibles. On vous donne ici une méthode itérative pour l'implanter, mais libre à vous d'opter pour une façon différente comme la méthode récursive du TP1 : a. Créer une copie du réseau en utilisant self. Nous vous conseillons d’utiliser la fonction Oo.copy (&lt; .. &gt; as 'a) -&gt; 'a). b. Utiliser trois boucles imbriquées comme ceci : De k = 0 à nb_villes -1 faire De j = 0 à nb_villes – 1 faire De i = 0 à nb-villes -1 faire Si le trajet n'existe pas entre i et j alors Si les trajets existent entre (i, k) et (k, j) alors Ajouter le trajet entre i et j en faisant la somme des couts en dollars et la somme des durées du vol en heures. Il ne faut pas ajouter les chemins qui ont une ville de départ et une ville d'arrivée identiques. c. Retourner la copie du réseau modifié.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#fermeture_transitive;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-trouver_successeurs"><a href="#method-trouver_successeurs" class="anchor"></a><code><span><span class="keyword">method</span> trouver_successeurs : <span><a href="../class-ville/index.html">ville</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../class-ville/index.html">ville</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../class-ville/index.html">ville</a> list</span></span></code></div><div class="spec-doc"><p><code>trouver_successeurs v lv</code> Cette méthode prend une ville v ainsi qu'une liste de villes lv et retourne la liste des successeurs de v se trouvant dans lv. Vous pouvez utiliser cette méthode pour implanter trouver_court_chemin.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#trouver_successeurs (r#retourner_ville &quot;Montreal&quot;) (r#get_liste_villes);;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-chemin_existe"><a href="#method-chemin_existe" class="anchor"></a><code><span><span class="keyword">method</span> chemin_existe : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>chemin_existe v lv</code> Cette méthode retourne true si un chemin existe entre une ville de départ et une ville d’arrivée, false sinon. Nous vous demandons d’utiliser fermeture_transitive et trajet_existe pour implanter cette méthode. Vous pouvez également utiliser cette méthode pour implanter trouver_court_chemin.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#chemin_existe &quot;Paris&quot; &quot;Bogota&quot;;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-trouver_court_chemin"><a href="#method-trouver_court_chemin" class="anchor"></a><code><span><span class="keyword">method</span> trouver_court_chemin : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> <span>string list</span> * float</span></code></div><div class="spec-doc"><p><code>trouver_court_chemin vd va b</code> Cette méthode prend le nom d'une ville de départ vd, le nom d'une ville d'arrivée va et un booléen (égale soit à true si on veut utiliser les couts en dollars, soit à false si on veut utiliser la durée du vol en heures pour calculer le chemin) et retourne une paire contenant une liste de chaînes de caractères représentant le plus court chemin entre va et vb et un float représentant la somme des pondérations (couts ou durées) du chemin en question. Nous vous suggérons d'ailleurs l'utilisation de l'algorithme de Dijkstra vu dans le cours IFT-2008 ou GLO-2100. https://fr.wikipedia.org/wiki/Algorithme_de_Dijkstra</p><p>Exemple:</p><pre class="language-ocaml"><code># r#trouver_court_chemin &quot;Quebec&quot; &quot;Bujumbura&quot; cdollars;;</code></pre></div></div><div class="odoc-spec"><div class="spec method anchored" id="method-afficher_reseau_aerien"><a href="#method-afficher_reseau_aerien" class="anchor"></a><code><span><span class="keyword">method</span> afficher_reseau_aerien : unit</span></code></div><div class="spec-doc"><p><code>afficher_reseau_aerien</code> Cette méthode affiche les villes ainsi que les trajets du réseau. Veuillez consulter le fichier &quot;testeur.ml&quot; ainsi que l'énoncé pour savoir le format de sortie de cette méthode.</p><p>Exemple:</p><pre class="language-ocaml"><code># r#afficher_reseau_aerien;;</code></pre></div></div></div></body></html>
